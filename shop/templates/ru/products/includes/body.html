{% load static %}
{% get_media_prefix as MEDIA_URL %}
{% load staticencoder %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"  href="{%  static  'shop\css\style.css'  %}">
    <link rel="stylesheet"  href="{%  static  'shop\css\productMain\products_style.css'  %}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" rel="stylesheet">
    <title>LuxonSport</title>
</head>
<body>
    <div class="conteiner">
        <div class="pr_body">
            <div class="all_products">
                <div class="helper">
                    <div class="help_search">
                        <div class='search'>
                            <form method='POST' action='' class="form_search">
                                {% csrf_token %}
                                <div class='searchtextdiv'>
                                    <input type='search' name='searchtext' class="searchtext">
                                </div>
                                <div class='searchbuttondiv'>
                                    <input type='submit' name='search' class='searchbutton' value='Поиск'>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="help_filters">
                        <form method='POST' action=''>
                            {% csrf_token %}
                            <div class="filter">
                                <div class="filter_set">
                                    {% if withprice == 'no' and available == 'no' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='pricefilter' value='Цены нет' checked>
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету' checked>
                                        </div>
                                    </div>
                                    {% elif withprice == 'no' and available == 'yes' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет' checked>
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть' checked>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету' >
                                        </div>
                                    </div>
                                    {% elif withprice == 'yes' and available == 'no' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть' checked>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет' >
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету' checked>
                                        </div>
                                    </div>
                                    {% elif withprice == 'yes' and available == 'yes' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть' checked>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет' >
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть' checked>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету'>
                                        </div>
                                    </div>
                                    {% elif withprice == 'spec' and available == 'yes' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет'>
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'checked>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету' >
                                        </div>
                                    </div>
                                    {% elif withprice == 'spec' and available == 'no' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет'>
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету' checked>
                                        </div>
                                    </div>
                                    {% elif withprice == 'spec' and available == 'spec' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет' >
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету' >
                                        </div>
                                    </div>
                                    {% elif withprice == 'yes' and available == 'spec' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть' checked>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет'>
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету'>
                                        </div>
                                    </div>
                                    {% elif withprice == 'no' and available == 'spec' %}
                                    <p>Цена</p>
                                    <div class="price_lab">
                                        <div class="filter_act">
                                            <label>С ценой</label>
                                            <input type='radio' name='pricefilter' value='Цена есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Без цены</label>
                                            <input type='radio' name='pricefilter' value='Цены нет' checked>
                                        </div>
                                    </div>
                                    <p>Наличие</p>
                                    <div class="availability_lab">
                                        <div class="filter_act">
                                            <label>Есть в наличии</label>
                                            <input type='radio' name='availablefilter' value='Есть'>
                                        </div>
                                        <div class="filter_act">
                                            <label>Нет в наличии</label>
                                            <input type='radio' name='availablefilter' value='Нету'>
                                        </div>
                                    </div>
                                    {% endif  %}
                                </div>
                                <div class="filter_but">
                                    <div style="display: none;"><input type="text" name='currentCagtegory' value="{{ currentCagtegory }}"></div>
                                    <input type='submit' name='applyfilters' value='Применить фильтры'>
                                    <input type='submit' name='nofilters' value='Убрать все фильтры'>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="help_category">
                        <div class="category">
                            <ul class="categories">
                                {% for i in category %}
                                    <li>{{ i.category_name_ru }}
                                        <ul class="subcategories">
                                            {% for j in i.подкатегория.all %}
                                                <li>
                                                    <form method="POST", action="">
                                                        {% csrf_token %}
                                                        <input type='hidden' name='categoryid' value='{{ j.subcategory_id }}'>
                                                        <input type='submit' name='categoryname' value='{{ j.subcategory_name_ru }}'>
                                                    </form>
                                                </li>
                                                {% endfor %}
                                        </ul>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            {% if maxPage != 0 %}
            <div class="body_inf">    
                <div class="content_products">
                    {% for продукт in продукты %}
                        <div class="line">
                            <div class="line_item item1">
                                <div class="line_item_info">
                                    <a href='/ru/product/{{ продукт.id }}/'><div class="line_item_img"><img alt="" src="{{ MEDIA_URL }}{{ продукт.image }}"></div></a>
                                    <div class="protuct_tit">
                                        <p class="line_item_text item_info">
                                            {{ продукт.название_позиции }}
                                        </p>
                                    </div> 
                                    {% if продукт.наличие != '-' %}
                                        <p class="item_info">
                                            Есть в наличии
                                        </p>
                                    {% else %}
                                        <p class=" item_info">
                                            Нет в наличии
                                        </p>
                                    {% endif %}
                                    {% if продукт.цена == None or продукт.валюта == None %}
                                        <p class="line_item_price item_info">
                                            Цена формируется
                                        </p> 
                                    {% else %}  
                                        {% if продукт.скидка > 0 %}
                                            <p class="line_item_price item_info">
                                                <s>{{ продукт.цена|floatformat:2  }} {{ продукт.валюта }}</s>
                                            </p>
                                            <p class="line_item_price item_info">
                                                {{ продукт.цена|discount:продукт.скидка|floatformat:2  }} {{ продукт.валюта }}
                                            </p>
                                        {% else %}
                                            <p class="line_item_price item_info">
                                                {{ продукт.цена|floatformat:2  }} {{ продукт.валюта }}
                                            </p>
                                        {% endif %}
                                    {% endif %}
                                    <div class="line_item_button">
                                        <a class="line_item_but " href='/ru/product/{{ продукт.id }}/'>
                                            Подробнее
                                        </a>   
                                    </div>
                                </div>
                            </div>
                        </div>  
                    {% endfor %}      
                </div>
            </div>
            {% else %}
                <p>Ничего не найдено</p>
            {% endif %}
        </div>
    </div>
    <div>
        <form method="POST" action=''>
            {% csrf_token %}
            {% if page != 1 %}
                <input type='submit' name='prevPage' value='Предыдущая страница'>
            {% endif %}
            {% if page == 1 %}
                <div style="display: none;"><input type="text" name='page' value="1"></div>
            {% else %}
                <div style="display: none;"><input type="text" name='page' value="{{ page }}"></div>
            {% endif %}
            <div style="display: none;"><input type="text" name='availableStatus' value="{{ available }}"></div>
            <div style="display: none;"><input type="text" name='withpriceStatus' value="{{ withprice }}"></div>
            <div style="display: none;"><input type="text" name='currentCagtegory' value="{{ currentCagtegory }}"></div>
            {% if maxPage > page %}
            <input type='submit' name='nextPage' value='Следующая страница'>
            {% endif %}
        </form>
    </div>
    {% if maxPage != 0 %}
        Страница {{ page }} из {{ maxPage }}
    {% endif %}
</div>
</body>
<script>
    function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}
function myFunction2() {
    document.getElementById("myDropdown2").classList.toggle("show");
}
function myFunction3() {
    document.getElementById("myDropdown3").classList.toggle("show");
}
function myFunction4() {
    document.getElementById("myDropdown4").classList.toggle("show");
}
function myFunction5() {
    document.getElementById("myDropdown5").classList.toggle("show");
}
function myFunction6() {
    document.getElementById("myDropdown6").classList.toggle("show");
}

</script>
</html>